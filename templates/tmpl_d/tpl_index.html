{% extends "../theme/bage.html" %}
{% block head %}
<title>{{ _('Directory') }} </title>
<meta name="keywords" content="{{ _('Directory') }}">
<meta name="description" content="{{ _('Directory') }}">
<style type="text/css">
    #map_div {
        width: 100%;
        height: 510px;
        border: 1px solid black;
        text-align: center;
        align-self: center;
        z-index: 1;
    }
    #start_draw_btn {

        z-index: 50;
        position: absolute;
        top: 20px;
        right: 200px;
    }
    .head{
        color: #fff;
        font-weight: normal;
    }
</style>
<script>
    $(document).ready(function () {


        $("#subit").click(function () {
            var keyw = $("#keyw9").val();
            var isweb = $('input:radio[name="isweb"]:checked').val();
            var ldrt = $('#ldrt').val();
            var max_num = $('#maxrecords').val();
            if (max_num == ''){
                max_num=20
            }

            window.location = "/directory_search/search/" + keyw + "/" + isweb+"/"+ldrt+"/"+max_num;
        });

        $("#keyw9").keydown(function (event) {
            var keyw = $("#keyw9").val();
            var isweb = $('input:radio[name="isweb"]:checked').val();
            var ldrt = $('#ldrt').val();
            var max_num = $('#maxrecords').val();
            if (max_num == ''){
                max_num=20
            }
            if (event.keyCode == 13) {


                window.location = "/directory_search/search/" + keyw + "/" + isweb+"/"+ldrt+"/"+max_num;
            }
        });
    });
</script>


<link rel="stylesheet" href="/static/dde_search/leaflet.draw.css" />
<script type="text/javascript" src="/static/dde_search/Leaflet.draw.js"></script>
<script type="text/javascript" src="/static/dde_search/Control.Draw.js"></script>
<script type="text/javascript" src="/static/dde_search/copyright.js"></script>
<script type="text/javascript" src="/static/dde_search/Leaflet.Draw.Event.js"></script>
<script type="text/javascript" src="/static/dde_search/Toolbar.js"></script>
<script type="text/javascript" src="/static/dde_search/Tooltip.js"></script>
<script type="text/javascript" src="/static/dde_search/ext/GeometryUtil.js"></script>
<script type="text/javascript" src="/static/dde_search/ext/LatLngUtil.js"></script>
<script type="text/javascript" src="/static/dde_search/ext/LineUtil.Intersect.js"></script>
<script type="text/javascript" src="/static/dde_search/ext/Polygon.Intersect.js"></script>
<script type="text/javascript" src="/static/dde_search/ext/Polyline.Intersect.js"></script>


<script src="/static/dde_search/ext/TouchEvents.js"></script>

<script src="/static/dde_search/draw/DrawToolbar.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Feature.js"></script>
<script src="/static/dde_search/draw/handler/Draw.SimpleShape.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Polyline.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Marker.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Circle.js"></script>
<script src="/static/dde_search/draw/handler/Draw.CircleMarker.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Polygon.js"></script>
<script src="/static/dde_search/draw/handler/Draw.Rectangle.js"></script>


<script src="/static/dde_search/edit/EditToolbar.js"></script>
<script src="/static/dde_search/edit/handler/EditToolbar.Edit.js"></script>
<script src="/static/dde_search/edit/handler/EditToolbar.Delete.js"></script>


<script src="/static/dde_search/edit/handler/Edit.Poly.js"></script>
<script src="/static/dde_search/edit/handler/Edit.SimpleShape.js"></script>
<script src="/static/dde_search/edit/handler/Edit.Rectangle.js"></script>
<script src="/static/dde_search/edit/handler/Edit.Marker.js"></script>
<script src="/static/dde_search/edit/handler/Edit.CircleMarker.js"></script>
<script src="/static/dde_search/edit/handler/Edit.Circle.js"></script>
{% end %}
{% block typebody %}

<div class="row">

        <div class="col-sm-8">
            <div id="map_div"></div>
            <button type="button" id="start_draw_btn" class="btn btn-primary" onclick="start_draw()">{{ _('Draw box') }}</button>
{#            <div id="info"></div>#}
            <script>
                var map = L.map("map_div", {
                    center: [0, 0],
                    zoom: 2,
                    maxZoom: 18,
                    minZoom: 1,
                });

                var osm = L.tileLayer.chinaProvider('TianDiTu.Normal.Map', {
                    maxZoom: 12,
                    attribution: '',
                    id: "mapbox.satellite",

                });
                osm.addTo(map);
                // 数据范围框集合
                var geojsonFeature = {"type": "MultiPolygon", "coordinates": [[[[-180.0, -54.46], [-180.0, 81.86], [180.0, 81.86], [180.0, -54.46], [-180.0, -54.46]]], [[[-180.0, 27.64], [-180.0, 81.85], [180.0, 81.85], [180.0, 27.64], [-180.0, 27.64]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[-180.0, 41.19], [-180.0, 81.86], [180.0, 81.86], [180.0, 41.19], [-180.0, 41.19]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[95.21, -10.93], [95.21, 5.91], [141.01, 5.91], [141.01, -10.93], [95.21, -10.93]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[14.41, -46.97], [14.41, -22.14], [37.89, -22.14], [37.89, -46.97], [14.41, -46.97]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[14.41, -46.97], [14.41, -22.14], [37.89, -22.14], [37.89, -46.97], [14.41, -46.97]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[14.42, 2.22], [14.42, 11.0], [27.46, 11.0], [27.46, 2.22], [14.42, 2.22]]], [[[-0.97, 52.5], [-0.97, 52.64], [-0.74, 52.64], [-0.74, 52.5], [-0.97, 52.5]]], [[[-7.56, 49.77], [-7.56, 49.86], [-7.43, 49.86], [-7.43, 49.77], [-7.56, 49.77]]], [[[-7.51, 49.79], [-7.51, 49.86], [-7.43, 49.86], [-7.43, 49.79], [-7.51, 49.79]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[-178.22, 18.93], [-178.22, 83.11], [179.78, 83.11], [179.78, 18.93], [-178.22, 18.93]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[173.4, -74.52], [173.4, 84.27], [-176.5, 84.27], [-176.5, -74.52], [173.4, -74.52]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[34.45, -17.16], [34.45, -15.04], [35.34, -15.04], [35.34, -17.16], [34.45, -17.16]]], [[[60.5, 29.41], [60.5, 38.47], [74.92, 38.47], [74.92, 29.41], [60.5, 29.41]]], [[[-178.22, -33.74], [-178.22, 71.35], [179.78, 71.35], [179.78, -33.74], [-178.22, -33.74]]], [[[79.7, 5.92], [79.7, 9.83], [81.89, 9.83], [81.89, 5.92], [79.7, 5.92]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[73.62, 18.17], [73.62, 53.55], [134.77, 53.55], [134.77, 18.17], [73.62, 18.17]]], [[[-180.0, -89.9], [-180.0, 83.63], [180.0, 83.63], [180.0, -89.9], [-180.0, -89.9]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[32.67, -17.13], [32.67, -9.36], [35.92, -9.36], [35.92, -17.13], [32.67, -17.13]]], [[[34.44, -17.16], [34.44, -15.04], [35.34, -15.04], [35.34, -17.16], [34.44, -17.16]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[25.24, -26.86], [25.24, -9.38], [50.5, -9.38], [50.5, -26.86], [25.24, -26.86]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[25.27, 41.25], [25.27, 41.25], [25.25, 41.25], [25.25, 41.25], [25.27, 41.25]]], [[[34.45, -17.04], [34.45, -15.04], [35.34, -15.04], [35.34, -17.04], [34.45, -17.04]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[73.62, 18.17], [73.62, 53.55], [134.77, 53.55], [134.77, 18.17], [73.62, 18.17]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-11.49, 4.34], [-11.49, 8.51], [-7.37, 8.51], [-7.37, 4.34], [-11.49, 4.34]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-6.82, 49.9], [-6.82, 58.6], [2.4, 58.6], [2.4, 49.9], [-6.82, 49.9]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[34.45, -17.16], [34.45, -15.04], [35.34, -15.04], [35.34, -17.16], [34.45, -17.16]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[73.62, 18.17], [73.62, 53.55], [134.77, 53.55], [134.77, 18.17], [73.62, 18.17]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -49.6], [-180.0, 61.58], [180.0, 61.58], [180.0, -49.6], [-180.0, -49.6]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[79.7, 5.92], [79.7, 9.83], [81.89, 9.83], [81.89, 5.92], [79.7, 5.92]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[34.45, -17.16], [34.45, -15.04], [35.34, -15.04], [35.34, -17.16], [34.45, -17.16]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[32.68, -17.14], [32.68, -9.38], [35.92, -9.38], [35.92, -17.14], [32.68, -17.14]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[27.5, -21.0], [27.5, -4.0], [39.83, -4.0], [39.83, -21.0], [27.5, -21.0]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-176.85, -52.58], [-176.85, -34.41], [178.84, -34.41], [178.84, -52.58], [-176.85, -52.58]]], [[[32.88, -17.09], [32.88, -9.75], [35.67, -9.75], [35.67, -17.09], [32.88, -17.09]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[95.01, -10.92], [95.01, 5.91], [140.98, 5.91], [140.98, -10.92], [95.01, -10.92]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[79.7, 5.92], [79.7, 9.83], [81.89, 9.83], [81.89, 5.92], [79.7, 5.92]]], [[[95.01, -10.92], [95.01, 5.91], [140.98, 5.91], [140.98, -10.92], [95.01, -10.92]]], [[[-175.36, -21.27], [-175.36, -18.57], [-173.91, -18.57], [-173.91, -21.27], [-175.36, -21.27]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[60.87, 23.69], [60.87, 37.06], [77.82, 37.06], [77.82, 23.69], [60.87, 23.69]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -89.9], [-180.0, 83.63], [180.0, 83.63], [180.0, -89.9], [-180.0, -89.9]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[79.7, 5.92], [79.7, 9.83], [81.89, 9.83], [81.89, 5.92], [79.7, 5.92]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[73.62, 18.17], [73.62, 53.55], [134.77, 53.55], [134.77, 18.17], [73.62, 18.17]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[32.67, -17.12], [32.67, -9.37], [35.92, -9.37], [35.92, -17.12], [32.67, -17.12]]], [[[34.44, -17.16], [34.44, -15.04], [35.34, -15.04], [35.34, -17.16], [34.44, -17.16]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[34.45, -17.13], [34.45, -15.04], [35.34, -15.04], [35.34, -17.13], [34.45, -17.13]]], [[[-179.98, -55.7], [-179.98, 81.8], [179.94, 81.8], [179.94, -55.7], [-179.98, -55.7]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -62.26], [-180.0, 60.42], [-179.69, 60.42], [-179.69, -62.26], [-180.0, -62.26]]], [[[79.7, 5.92], [79.7, 9.83], [81.89, 9.83], [81.89, 5.92], [79.7, 5.92]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[-180.0, -89.9], [-180.0, 83.63], [180.0, 83.63], [180.0, -89.9], [-180.0, -89.9]]], [[[-6.83, 49.84], [-6.83, 58.91], [2.46, 58.91], [2.46, 49.84], [-6.83, 49.84]]], [[[-178.22, 18.93], [-178.22, 71.35], [179.78, 71.35], [179.78, 18.93], [-178.22, 18.93]]], [[[34.45, -16.94], [34.45, -15.04], [35.34, -15.04], [35.34, -16.94], [34.45, -16.94]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[95.01, -10.92], [95.01, 5.91], [140.98, 5.91], [140.98, -10.92], [95.01, -10.92]]], [[[122.94, 24.21], [122.94, 45.52], [153.99, 45.52], [153.99, 24.21], [122.94, 24.21]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[32.67, -17.12], [32.67, -9.37], [35.92, -9.37], [35.92, -17.12], [32.67, -17.12]]], [[[116.95, 5.05], [116.95, 19.39], [126.6, 19.39], [126.6, 5.05], [116.95, 5.05]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[34.3, -13.97], [34.3, -13.45], [34.6, -13.45], [34.6, -13.97], [34.3, -13.97]]], [[[32.68, -17.14], [32.68, -9.38], [35.92, -9.38], [35.92, -17.14], [32.68, -17.14]]], [[[173.4, -74.52], [173.4, 84.27], [-176.5, 84.27], [-176.5, -74.52], [173.4, -74.52]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[32.81, -17.09], [32.81, -9.62], [35.69, -9.62], [35.69, -17.09], [32.81, -17.09]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-180.0, -54.46], [-180.0, 81.86], [180.0, 81.86], [180.0, -54.46], [-180.0, -54.46]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[66.33, -16.95], [66.33, -7.91], [91.65, -7.91], [91.65, -16.95], [66.33, -16.95]]], [[[-180.0, -90.0], [-180.0, 90.0], [180.0, 90.0], [180.0, -90.0], [-180.0, -90.0]]], [[[34.44, -16.94], [34.44, -15.04], [35.34, -15.04], [35.34, -16.94], [34.44, -16.94]]], [[[34.45, -17.04], [34.45, -15.04], [35.34, -15.04], [35.34, -17.04], [34.45, -17.04]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -55.9], [-180.0, 83.11], [180.0, 83.11], [180.0, -55.9], [-180.0, -55.9]]], [[[34.45, -17.16], [34.45, -15.38], [35.34, -15.38], [35.34, -17.16], [34.45, -17.16]]], [[[179.87, -90.0], [179.87, 84.49], [180.0, 84.49], [180.0, -90.0], [179.87, -90.0]]], [[[-6.81, 54.03], [-6.81, 55.3], [-5.37, 55.3], [-5.37, 54.03], [-6.81, 54.03]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -54.75], [-180.0, 81.85], [180.0, 81.85], [180.0, -54.75], [-180.0, -54.75]]], [[[-2.95, 51.06], [-2.95, 51.15], [-2.8, 51.15], [-2.8, 51.06], [-2.95, 51.06]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[80.05, 26.37], [80.05, 30.42], [88.19, 30.42], [88.19, 26.37], [80.05, 26.37]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[34.76, -14.75], [34.76, -14.09], [35.3, -14.09], [35.3, -14.75], [34.76, -14.75]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-6.83, 49.84], [-6.83, 58.91], [2.46, 58.91], [2.46, 49.84], [-6.83, 49.84]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[34.44, -17.16], [34.44, -15.04], [35.34, -15.04], [35.34, -17.16], [34.44, -17.16]]], [[[95.01, -10.92], [95.01, 5.91], [140.98, 5.91], [140.98, -10.92], [95.01, -10.92]]], [[[60.5, 29.41], [60.5, 38.47], [74.92, 38.47], [74.92, 29.41], [60.5, 29.41]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[34.61, -16.78], [34.61, -16.02], [35.59, -16.02], [35.59, -16.78], [34.61, -16.78]]], [[[60.5, 29.41], [60.5, 38.47], [74.92, 38.47], [74.92, 29.41], [60.5, 29.41]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-180.0, -89.9], [-180.0, 83.63], [180.0, 83.63], [180.0, -89.9], [-180.0, -89.9]]], [[[123.68, 24.25], [123.68, 45.49], [145.81, 45.49], [145.81, 24.25], [123.68, 24.25]]], [[[112.91, -54.75], [112.91, -10.14], [158.96, -10.14], [158.96, -54.75], [112.91, -54.75]]], [[[-180.0, -90.0], [-180.0, 83.62], [180.0, 83.62], [180.0, -90.0], [-180.0, -90.0]]], [[[-179.97, -78.5], [-179.97, 88.27], [179.58, 88.27], [179.58, -78.5], [-179.97, -78.5]]], [[[92.2, -10.93], [92.2, 28.55], [141.01, 28.55], [141.01, -10.93], [92.2, -10.93]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[73.62, 18.17], [73.62, 53.55], [134.77, 53.55], [134.77, 18.17], [73.62, 18.17]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[25.67, 35.82], [25.67, 42.11], [44.82, 42.11], [44.82, 35.82], [25.67, 35.82]]], [[[-180.0, -90.0], [-180.0, 83.63], [180.0, 83.63], [180.0, -90.0], [-180.0, -90.0]]], [[[-78.98, 15.2], [-78.98, 37.09], [11.99, 37.09], [11.99, 15.2], [-78.98, 15.2]]], [[[-141.0, 41.68], [-141.0, 83.11], [-52.62, 83.11], [-52.62, 41.68], [-141.0, 41.68]]], [[[68.14, 6.75], [68.14, 35.51], [97.38, 35.51], [97.38, 6.75], [68.14, 6.75]]]]};
                {#L.geoJSON(geojsonFeature).addTo(map);#}

                // 数据范围中心点集合
                var geojsonFeature2 = {"type": "MultiPoint", "coordinates": [[-0.0, -3.185], [-0.0, 13.7], [-0.0, 54.745], [-0.0, -0.0], [-0.0, -3.185], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [138.465, 34.865], [-0.0, 61.525], [138.465, 34.865], [118.11, -2.51], [118.11, -2.51], [118.11, -2.51], [118.11, -2.51], [118.11, -2.51], [134.745, 34.87], [118.11, -2.51], [-0.0, -3.19], [20.94, 6.61], [-0.0, -3.19], [-0.0, -3.19], [20.94, 6.61], [20.94, 6.61], [20.94, 6.61], [20.94, 6.61], [-0.0, -3.19], [135.935, -32.445], [26.15, -34.555], [20.94, 6.61], [26.15, -34.555], [-0.0, -3.19], [20.94, 6.61], [20.94, 6.61], [-0.855, 52.57], [-7.495, 49.815], [-7.47, 49.825], [135.935, -32.445], [-0.0, -0.0], [0.78, 51.02], [-0.0, -0.0], [0.78, 45.14], [0.78, 45.14], [0.78, 45.14], [0.78, 45.14], [-0.0, -0.0], [0.78, 45.14], [-1.55, 4.875], [-0.0, -3.19], [-0.0, -3.19], [-0.0, -3.19], [-0.0, -3.185], [67.71, 33.94], [0.78, 18.805], [34.895, -16.1], [80.795, 7.875], [-0.0, -3.185], [-0.0, -3.135], [104.195, 35.86], [-0.0, -3.19], [34.295, -13.245], [-0.0, -3.185], [34.89, -16.1], [121.775, 12.22], [37.87, -18.12], [35.245, 38.965], [135.935, -32.445], [25.26, 41.25], [34.895, -16.04], [138.465, 34.865], [-0.0, -0.0], [-96.81, 62.395], [-96.81, 62.395], [-0.0, -3.185], [-0.0, -3.185], [-96.81, 62.395], [-9.43, 6.425], [-0.0, -3.185], [104.195, 35.86], [-0.0, -3.19], [-2.21, 54.25], [-0.0, -3.185], [34.895, -16.1], [35.245, 38.965], [134.745, 34.87], [-0.0, -3.19], [104.195, 35.86], [-0.0, -3.185], [-0.0, 5.99], [-0.0, -3.185], [-0.0, -3.19], [179.935, -2.755], [80.795, 7.875], [138.465, 34.865], [135.935, -32.445], [-0.0, -0.0], [179.935, -2.755], [-0.0, -3.185], [34.895, -16.1], [121.775, 12.22], [-0.0, -3.19], [-96.81, 62.395], [121.775, 12.22], [34.3, -13.26], [138.465, 34.865], [-0.0, -3.185], [-0.0, -3.19], [33.665, -12.5], [121.775, 12.22], [-0.0, -3.19], [35.245, 38.965], [-0.0, -3.19], [-96.81, 62.395], [0.995, -43.495], [34.275, -13.42], [-0.0, -3.185], [117.995, -2.505], [-96.81, 62.395], [-0.0, -3.185], [-0.0, -3.19], [135.935, -32.445], [179.935, -2.755], [179.935, -2.755], [-0.0, -3.185], [-0.0, -3.19], [-0.0, -3.185], [134.745, 34.87], [-0.0, -3.185], [80.795, 7.875], [117.995, -2.505], [-174.635, -19.92], [121.775, 12.22], [-0.0, -3.185], [-0.0, -3.19], [-0.0, -3.185], [-0.0, -3.19], [69.345, 30.375], [-0.0, -3.185], [138.465, 34.865], [-0.0, -3.185], [-0.0, -3.135], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [35.245, 38.965], [80.795, 7.875], [-96.81, 62.395], [121.775, 12.22], [-0.0, -3.19], [-0.0, -3.185], [138.465, 34.865], [138.465, 34.865], [179.935, -2.755], [-0.0, -3.19], [-0.0, -3.185], [104.195, 35.86], [121.775, 12.22], [134.745, 34.87], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -0.0], [34.295, -13.245], [34.89, -16.1], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [34.895, -16.085], [-0.02, 13.05], [-0.0, -3.19], [-179.845, -0.92], [80.795, 7.875], [138.465, 34.865], [-0.0, -3.135], [-2.185, 54.375], [0.78, 45.14], [34.895, -15.99], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [121.775, 12.22], [117.995, -2.505], [138.465, 34.865], [-0.0, -3.19], [134.745, 34.87], [-0.0, -3.19], [-0.0, -3.185], [-0.0, -3.185], [34.295, -13.245], [121.775, 12.22], [-0.0, -3.19], [135.935, -32.445], [35.245, 38.965], [34.45, -13.71], [34.3, -13.26], [-1.55, 4.875], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [34.25, -13.355], [-0.0, -3.185], [-96.81, 62.395], [-0.0, 13.7], [-0.0, -3.19], [-0.0, -3.185], [78.99, -12.43], [-0.0, -0.0], [34.89, -15.99], [34.895, -16.04], [-0.0, -3.185], [-0.0, 13.605], [34.895, -16.27], [179.935, -2.755], [-6.09, 54.665], [-0.0, -3.185], [-0.0, 13.55], [-2.875, 51.105], [-0.0, -3.19], [-0.0, -3.185], [-0.0, -3.185], [84.12, 28.395], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [-0.0, -3.185], [35.03, -14.42], [-0.0, -3.19], [-2.185, 54.375], [-96.81, 62.395], [-0.0, -3.19], [-96.81, 62.395], [134.745, 34.87], [34.89, -16.1], [117.995, -2.505], [67.71, 33.94], [-0.0, -3.185], [35.1, -16.4], [67.71, 33.94], [-0.0, -3.185], [-0.0, -3.19], [-0.0, -3.135], [134.745, 34.87], [135.935, -32.445], [-0.0, -3.19], [-0.195, 4.885], [116.605, 8.81], [-0.0, -3.185], [104.195, 35.86], [-0.0, -3.185], [35.245, 38.965], [-0.0, -3.185], [-33.495, 26.145], [-96.81, 62.395], [82.76, 21.13]]}
                {#L.geoJSON(geojsonFeature2).addTo(map);#}

                var service_position = L.layerGroup();
                var centroids = L.layerGroup();

                $.ajax({
                    type: "get",
                    url: "/directory_json/cruise-svr",
                    dataType: "json",
                    success: function (msg) {
                        var data = msg.results
                        $.each(data, function (infoIndex, info) {
                                var title_text = "<div style='font-size:12px;line-height:12px; padding: 10px 0 5px 0'><b>Place</b> : " +
                                    info['place'] + "</div> " + "<div style='font-size:12px;line-height:12px;padding: 10px 0 13px 0''><b>latlng</b> : " + info['lat'] + ',' + info['lon'] + "</div>" + "" +
                                    "<div style='font-size:12px;line-height:12px;'><b>Number:</b>  " + info['num'] + '</div>';
                                var igainfo = title_text;
                                L.circleMarker([info['lat'], info['lon']], {
                                    color: '#f90',
                                    fillColor: '#f00',
                                    fill: '#f01234',
                                    fillOpacity: 1.0,
                                    radius: 5
                                }).addTo(service_position).bindPopup(igainfo);
                                {#
                                    if (info['num'] < 3) {
                                        L.circleMarker([info['lat'], info['lon']], geojson_mar_opt_2).addTo(map).bindPopup(igainfo);
                                    } else if (info['num'] < 5 && info['num'] >= 3) {

                                        L.circleMarker([info['lat'], info['lon']], geojson_mar_opt_4).addTo(map).bindPopup(igainfo);
                                    } else if (info['num'] < 10 && info['num'] >= 5) {

                                        L.circleMarker([info['lat'], info['lon']], geojson_mar_opt_5).addTo(map).bindPopup(igainfo);
                                    } else if (info['num'] >= 10) {

                                        L.circleMarker([info['lat'], info['lon']], geojson_mar_opt_7).addTo(map).bindPopup(igainfo);
                                    }
                                     #}
                            }
                        )
                    },
                    error: function () {
                    }
                });
               $.each(geojsonFeature2['coordinates'],function (infoindex,info){
                    {#alert(info[1])#}

                   L.circleMarker([info[1],info[0]], {
                       color: '#99bbff',
                       fillColor: '#009fcc',
                       fill: '#007799',
                       fillOpacity: 1.0,
                       radius: 6
                   }).addTo(centroids)
                })
                var baseMaps = {
                    "Tianditu": osm,

                };

                var overlaymaps = {
                    'Service position':service_position,
                    'Datasets centroids':centroids,
                }
                service_position.addTo(map)
                // centroids.addTo(map)
                 L.control.layers(baseMaps,overlaymaps).addTo(map);
                //添加绘制图层
                var drawnItems = new L.FeatureGroup();
                map.addLayer(drawnItems);

                map.on(L.Draw.Event.CREATED, function(e){
//          清空之前画得矩形
                    drawnItems.clearLayers();
                    var type = e.layerType,
                        //获取绘制图层
                        drawlayer = e.layer;


                 // const marker = L.marker(drawlayer._latlngs[0][0]).addTo(map);//左下
                 // const marker = L.marker(drawlayer._latlngs[0][1]).addTo(map);//左上
                 // const marker = L.marker(drawlayer._latlngs[0][3]).addTo(map);//右下
                    {#document.getElementById('info').innerHTML ='左下latlng:'+ drawlayer._latlngs[0][0]+'右上latlng：'+drawlayer._latlngs[0][2];#}

                    var ld = drawlayer._latlngs[0][0].lat.toFixed(3)+','+drawlayer._latlngs[0][0].lng.toFixed(3)
                    var rt = drawlayer._latlngs[0][2].lat.toFixed(3)+','+drawlayer._latlngs[0][2].lng.toFixed(3)

                    document.getElementById('ldrt').value =ld +","+ rt

                    if(type === 'marker'){
                        drawlayer.bindPopup('A popup!');
                    }
                    drawnItems.addLayer(drawlayer);

                    //重新开启画矩形
                    let rectangle = new L.Draw.Rectangle(map, {
                        shapeOptions: {
                            weight: 1,
                            color: '#3760d4',
                            opacity: 0.8
                        }
                    });
                    rectangle.enable();
                });
                var popup=L.popup();
                map.on('click',function (e) {
                    popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString())
                        .openOn(map);
                })
                function start_draw() {
                    {#console.log('ffffffffffffffffffffff')#}
                    $('#start_draw_btn').html("<span class='glyphicon glyphicon-ok'></span> Draw box")
                    $('#start_draw_btn').addClass("btn-success");
                    centroids.remove(map)
                    service_position.remove(map)
                    let rectangle = new L.Draw.Rectangle(map, {
                        shapeOptions: {
                            weight: 1,
                            color: '#3760d4',
                            opacity: 0.8
                        }
                    });
                    rectangle.enable();
                }

            </script>
            <Br>
            <div class="row">
            <div class="col-sm-6">
                <div class="panel panel-black">
                    {% module post_catalog_of('d100',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('d200',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('d300',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>

            </div>


            <div class="col-sm-6">
                <div class="panel panel-black">
                    {% module post_catalog_of('d400',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('d500',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('d600',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('da00',kind='d',glyph='glyphicon glyphicon-list-alt') %}
                </div>
                <div class="panel panel-black">
                    {% module post_catalog_of('db00',kind='d',glyph='glyphicon glyphicon-list-alt') %}

                </div>

            </div>
            </div>
        </div>
    <div class="col-sm-4">

        <div class="panel panel-black">

<div class="panel-heading">
    <h4 class="head">{{ _('Query in GDMD') }} </h4>
</div>

            <div class="panel-body">

<div class="col-sm-12">
                <form action="/directory_search/" class="form-horizontal mart15">



                    <div class="form-group">
                         <label for="kyew9">Keywords</label>
                            <input type="text" id="keyw9" name="kyew9" placeholder="{{ _('Enter the keywords') }}"
                                   class="form-control"
                                   onKeyDown="if (event.keyCode==13) return false;">
                    </div>
                    <div class="form-group">
                        <label for="maxrecords">{{ _('Max records') }}</label><br />
                        <input type="text" value="10" id="maxrecords" name="maxrecords" class="form-control" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"
                               onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'0')}else{this.value=this.value.replace(/\D/g,'')}"
                            >
                    </div>
                    <div class="form-group">
                         <label for="ldrt">Boundary box(Drawing the box on left map)</label>
                            <input type="text" id="ldrt" name="ldrt"  class="form-control" readonly>
                    </div>

                    <div class="form-group">

                            <label for="kyew9">Query Scope</label><br />
                            <label >
                            <input type="radio" id="isweb" name="isweb" value="1" checked> {{ _('Local') }}
                            <input type="radio" id="isweb" name="isweb" value="2" > {{ _('Federated') }}
                            </label>

                    </div>

                     <div class="form-group">

                              <a type="submit" class="btn btn-primary" id="subit"><span class="glyphicon glyphicon-search"></span>
                                  {{ _('Query') }}</a>
                                  {#                <p><a href="/directory_search/"> Advanced search</a></p>#}

                    </div>
                </form>
                 </div>
            </div>

            <div class="panel-heading">
               <h4 class="head">Introduction</h4>
            </div>
            <div class="panel-body">



                     <p>GDMD means Global Disaster Data Master Directory. It is a directory, a hub and a clearinghouse for disaster data in the world. It is also a tool for disaster data directory present, search, publish, mining and analyzing.  </p>
                     <p>• Present: show the directory in same classification system with rich metadata.  </p>
                     <p>• Search: search the directory in local database, federated database, and spatial map style.  </p>
                     <p>• Publish, release the metadata in local or harvest the data catalog with same interface.  </p>
                     <p>• Mining, mining the metadata semantic and produce more labels for data discovery.  </p>
                     <p>• Analyzing, analyzing the linked data and producing disaster data knowledge graph.  </p>


            </div>
{% module statistical_info()  %}
<div class="panel-heading">
<h4 class="head">Standards Support</h4>
            </div>

<div class="panel-body">

      <table border="1" class="docutils table table-bordered" >
	    {#
	    <colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
	    #}
<thead valign="bottom">
<tr class="row-odd"><th class="head">Standard</th>
<th class="head">Version(s)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://ogcapi.ogc.org/records" target="_blank">OGC API - Records - Part 1: Core</a></td>
<td>1.0</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.ogc.org/DRAFTS/19-079.html" target="_blank">OGC API - Features - Part 3: Filtering and CQL</a></td>
<td>draft</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.ogc.org/standards/cat" target="_blank">OGC CSW</a></td>
<td>2.0.2/3.0.0</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.ogc.org/standards/filter" target="_blank">OGC Filter</a></td>
<td>1.1.0/2.0.0</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.ogc.org/standards/common" target="_blank">OGC OWS Common</a></td>
<td>1.0.0/2.0.0</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.ogc.org/standards/gml" target="_blank">OGC GML</a></td>
<td>3.1.1</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.ogc.org/standards/sfs" target="_blank">OGC SFSQL</a></td>
<td>1.2.1</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.opengeospatial.org/cs/17-002r1/17-002r1.html" target="_blank">OGC GeoRSS</a></td>
<td>1.0</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.dublincore.org/" target="_blank">Dublin Core</a></td>
<td>1.1</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.w3.org/TR/soap/" target="_blank">SOAP</a></td>
<td>1.2</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=26020" target="_blank">ISO 19115</a></td>
<td>2003</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=32557" target="_blank">ISO 19139</a></td>
<td>2007</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39890" target="_blank">ISO 19119</a></td>
<td>2005</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://earthdata.nasa.gov/esdis/eso/standards-and-references/directory-interchange-format-dif-standard" target="_blank">NASA DIF</a></td>
<td>9.7</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.fgdc.gov/metadata/csdgm-standard" target="_blank">FGDC CSDGM</a></td>
<td>1998</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.geocat.admin.ch/en/dokumentation/gm03.html" target="_blank">GM03</a></td>
<td>2.1</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.loc.gov/standards/sru" target="_blank">SRU</a></td>
<td>1.1</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.ogc.org/standards/opensearchgeo" target="_blank">OGC OpenSearch</a></td>
<td>1.0</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://www.openarchives.org/pmh/" target="_blank">OAI-PMH</a></td>
<td>2.0</td>
</tr>
</tbody>
</table>

            </div>


        </div>
    </div>

</div>

{% end %}

